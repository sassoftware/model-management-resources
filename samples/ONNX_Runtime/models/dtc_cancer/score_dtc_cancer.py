
from pathlib import Path

import requests

import settings

def score_model(MEANRADIUS, MEANTEXTURE, MEANPERIMETER, MEANAREA, MEANSMOOTHNESS, MEANCOMPACTNESS, MEANCONCAVITY, MEANCONCAVEPOINTS, MEANSYMMETRY, MEANFRACTALDIMENSIONS, RADIUSERROR, TEXTUREERROR, PERIMETERERROR, AREAERROR, SMOOTHNESSERROR, COMPACTNESSERROR, CONCAVITYERROR, CONCAVEPOINTSERROR, SYMMETRYERROR, FRACTALDIMENSIONERROR, WORSTRADIUS, WORSTTEXTURE, WORSTPERIMETER, WORSTAREA, WORSTSMOOTHNESS, WORSTCOMPACTNESS, WORSTCONCAVITY, WORSTCONCAVEPOINTS, WORSTSYMMETRY, WORSTFRACTALDIMENSION):
    "Output: EM_CLASSIFICATION"

    model_path = str(Path(settings.pickle_path) / "dtc_cancer.pickle")
    input_data = [MEANRADIUS, MEANTEXTURE, MEANPERIMETER, MEANAREA, MEANSMOOTHNESS, MEANCOMPACTNESS, MEANCONCAVITY, MEANCONCAVEPOINTS, MEANSYMMETRY, MEANFRACTALDIMENSIONS, RADIUSERROR, TEXTUREERROR, PERIMETERERROR, AREAERROR, SMOOTHNESSERROR, COMPACTNESSERROR, CONCAVITYERROR, CONCAVEPOINTSERROR, SYMMETRYERROR, FRACTALDIMENSIONERROR, WORSTRADIUS, WORSTTEXTURE, WORSTPERIMETER, WORSTAREA, WORSTSMOOTHNESS, WORSTCOMPACTNESS, WORSTCONCAVITY, WORSTCONCAVEPOINTS, WORSTSYMMETRY, WORSTFRACTALDIMENSION]
    data = {"model": model_path, "data": input_data}

    url = "http://onnx-service.base.svc.cluster.local:8080/predict"
    response = requests.post(url, json=data)

    return str(response.json()["output"][0])
