# Migration of SAS Viya 3.5 Python Models to SAS Viya 2020.1 or Later

This directory contains scripts or notebooks used to convert Python model assets from the SAS Viya 3.5 format to the SAS Viya 2020.1 or later format. The modelMigration.py script can be used with one unzipped model at a time.

**Note:** *Python models migrating via the [Model Repository service restore process](https://documentation.sas.com/?cdcId=mdlmgrcdc&cdcVersion=default&docsetId=mdlmgrag&docsetTarget=p0n2f2djoollgqn13isibmb98qd2.htm#p171e1x1xjqhpen1i9le09m3bi7e) or by manual export and import from SAS Viya 3.5 to SAS Viya 2020.1 or later will not score or validate successfully without modification.*

## modelMigration.py

The modelMigration.py script is designed to modify model assets through the following actions to fit the format expected in SAS Viya 2020.1 or later:

* Deletes DS2 wrappers used in SAS Viya 3.5. 
  These files typically are named score.sas, dmcas_epscorecode.sas, or dmcas_packagescore.sas.
  In SAS Viya 2020.1 and later the wrapper code is automatically generated by SAS Model Manager when attempting to score or validate a model.
* Modifies the modelProperties.json file to set the scoreCodeType to "Python" instead of DS2.
* Modifies the fileMetadata.json file to set the score role for the Python score script instead of the DS2 wrapper.
* Modifies the Python score code to use the settings.pickle_path functionality in SAS Viya 2020.1 or later.

### Prerequisites

The modelMigration.py script runs on one model at a time, aiming at a directory in which the SAS Viya 3.5 Python model has all of its assets unzipped. The files in the directory are then modified and ready to be rezipped and imported into SAS Model Manager.

The pandas package is required for the modelMigration.py script to run. The script works in Python 3.4+.
